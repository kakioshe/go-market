

<div class="row" style="margin-top:5%;">
  <div class="col-md-3">
    <div class="row">
      <div class="col-md-12" id="seller-card">
        <div id="st-info">
          Seller Information
        </div>

        <div id="st-storeinfo">
          <% if @store.avatar? %>
          <%= image_tag(@store.avatar.url, :class => "profile-picture") %>
          <% else %>
          <%= image_tag( "products/p-camera.png", id: 'seller-card-picture') %>
          <% end %>
          <div id="store-information">
            <p id="store-name"><%= @store.name.upcase %></p>
            <p id="store-description"><%= @store.description %></p>

            <% if current_user.stores_id==@store.id %>
              <div class="col-md-2 right-align-card">
                <%= link_to 'Edit', edit_store_path, {:id => 'edit-link'} %>
              </div>
            <% end %>
          </div>
        </div>
      </div>
    </div>

    <%= link_to store_path(current_user.stores_id), {:id => 'button-link'} do %>
    <div class="row" style="margin-top:5%;">
      <div class="col-md-12 mx-auto">
        <div class="store-button">
          <p> Manage Store </p>
        </div>
      </div>
    </div>
    <% end %>



  </div>


  <div class="col-md-8">
    <div class="row">
      <div class="col-md-8" id="title-item">
        <p> Transaction History </p>

      </div>
    </div>

    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
      google.charts.load('current', {'packages':['corechart']});
      google.charts.setOnLoadCallback(drawChart);

      function drawChart() {

        var data = google.visualization.arrayToDataTable([

          ['Task', 'Hours per Day'],
          <% for i in 0..(@month.count-2) %>
          ['<%= @monthDict[i+1] %>', <%= @month[i].count.to_i %>],
          <% end %>
        ]);

        var options = {
          title: 'Transaction Summary Per Month'
        };

        var chart = new google.visualization.PieChart(document.getElementById('piechart'));

        chart.draw(data, options);
      }
    </script>

    <div id="piechart" style="width: 100%; height: 350px;"></div>

    <div class="row">
      <div class="col-md-12">
        <script type="text/javascript">
          google.charts.load('current', {'packages':['table']});
          google.charts.setOnLoadCallback(drawTable);

          var cssClassNames = {
            'headerRow': 'cssHeaderRow',
            'tableRow': 'cssTableRow',
            'oddTableRow': 'cssOddTableRow',
            'selectedTableRow': 'cssSelectedTableRow',
            'hoverTableRow': 'cssHoverTableRow',
            'headerCell': 'cssHeaderCell',
            'tableCell': 'cssTableCell',
            'rowNumberCell': 'cssRowNumberCell'
          };

          function drawTable() {
            var data = new google.visualization.DataTable();
            data.addColumn('string', 'Order Id');
            data.addColumn('string', 'Item Name');
            data.addColumn('string', 'Quantity');
            data.addColumn('string', 'Buyer');
            data.addColumn('string', 'Status');
            data.addColumn('string', 'Action');
            data.addRows([
              <% @transaction.each do |item| %>
              [ '<%= item.order_id %>', '<%= item.title %>', '<%= item.quantity.to_i %>', '<%= item.buyer %>', '<%= item.status %>',
              '<% if item.status=="Paid" %><%= link_to "Action", store_history_execute_path(:order_id => item.order_id, :product => item.products_id), method: :post %><% else %>Done<% end %>' ],
              <% end %>
            ]);

            var table = new google.visualization.Table(document.getElementById('table_div'));

            table.draw(data, {width: '100%', height: '100%', 'allowHtml': true, 'cssClassNames': cssClassNames});
          }
        </script>

        <div id="table_div"></div>

      </div>
    </div>



  </div>
</div>
